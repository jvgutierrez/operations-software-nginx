Description: Use linker flags from environment for perl (dpkg-buildflags).
 Necessary for hardening flags.
Author: Christos Trochalakis <yatiohi@ideopolis.gr>
diff --git a/src/http/modules/perl/Makefile.PL b/src/http/modules/perl/Makefile.PL
index 7edadcb..3b6799c 100644
--- a/src/http/modules/perl/Makefile.PL
+++ b/src/http/modules/perl/Makefile.PL
@@ -3,6 +3,7 @@
 # Copyright (C) Nginx, Inc.
 
 use 5.006001;
+use Config;
 use ExtUtils::MakeMaker;
 
 WriteMakefile(
@@ -16,7 +17,9 @@ WriteMakefile(
     CCFLAGS           => "$ENV{NGX_PM_CFLAGS}",
     OPTIMIZE          => '-O',
 
-    LDDLFLAGS         => "$ENV{NGX_PM_LDFLAGS}",
+    # Pass link hardening flags
+    # $ENV{NGX_PM_LDFLAGS} is the default
+    LDDLFLAGS         => "$ENV{NGX_PM_LDFLAGS} $ENV{DEBIAN_NGINX_PERL_LDFLAGS}",
 
     INC               => join(" ", map {
                              m#^/# ? "-I $_" : "-I ../../../../../$_"
